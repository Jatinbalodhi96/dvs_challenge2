{"version":3,"file":"translate.min.js","sources":["../index-translate.js","../src/translate.js","../src/package.js"],"sourcesContent":["export { version } from './src/package.js'\nimport { translate } from './src/translate.js'\n\nif (typeof jQuery != 'undefined') {\n  jQuery.extend(jQuery.fn, {\n    translate: translate\n  })\n}\n","export function translate(options) {\n  options = options || {}\n  var self = this\n  self.each(function () {\n    var $this = $(this)\n    var source = $this.attr('lang') || options.source || ''\n    var target = $this.attr('lang-target') || options.target\n    if (!target)\n      throw new Error('$.translate has no target')\n    if (target == source)\n      return\n    var nodes = [], original = [], q = [], node\n    var walk = document.createTreeWalker(this, NodeFilter.SHOW_TEXT, null, false)\n    while (node = walk.nextNode()) {\n      var text = node.textContent\n      var trimmed = $.trim(text)\n      if (trimmed) {\n        nodes.push(node)\n        original.push(text)\n        q.push(trimmed)\n      }\n    }\n    var request = { q: q, source: source, target: target }\n    $.ajax({\n      url: $this.attr('lang-url') || options.url || 'translate',\n      data: request,\n      traditional: true\n    }).done(function (response) {\n      response.forEach(function (d, i) {\n        d.node = nodes[i]\n        d.node.textContent = original[i].replace(d.q, d.t)\n      })\n      $this.trigger({ type: 'translate', translate: response })\n    }).fail(function (xhr, testStatus, error) {\n      $this.trigger({ type: 'error', request: request, xhr: xhr })\n      // eslint-disable-next-line no-console\n      console.warn('$.translate: error', error)\n    })\n  })\n  return this\n}\n","export var name = \"g1\";\r\nexport var version = \"0.17.3\";\r\nexport var description = \"Gramex 1.x interaction library\";\r\nexport var license = \"MIT\";\r\nexport var author = \"S Anand <s.anand@gramener.com>\";\r\nexport var module = \"modules.js\";\r\nexport var main = \"dist/g1.js\";\r\nexport var jsdelivr = \"dist/g1.min.js\";\r\nexport var unpkg = \"dist/g1.min.js\";\r\nexport var repository = {\"type\":\"git\",\"url\":\"git@code.gramener.com:s.anand/g1.git\"};\r\nexport var scripts = {\"lint\":\"eslint index*.js src && eclint check '**/*.html' '**/*.js' '**/*.css' '**/*.yaml' '**/*.md'\",\"build\":\"rimraf dist && json2module package.json > src/package.js && rollup -c\",\"dev\":\"rimraf dist && json2module package.json > src/package.js && rollup -c -w\",\"pretest\":\"npm run lint && npm run build && browserify -s tape -r tape -o test/tape.js\",\"server\":\"npm run pretest && npm run lint && node test/server.js\",\"test\":\"tape test/test-*.js | faucet && node test/server.js puppeteer | tap-merge | faucet\",\"test-chrome\":\"node test/server.js chrome | tap-merge | faucet\",\"test-edge\":\"node test/server.js MicrosoftEdge | tap-merge | faucet\",\"test-firefox\":\"node test/server.js firefox | tap-merge | faucet\",\"prepublishOnly\":\"npm test\"};\r\nexport var devDependencies = {\"babel-core\":\"6\",\"babel-plugin-external-helpers\":\"6\",\"babel-plugin-transform-runtime\":\"6\",\"babel-preset-env\":\"1\",\"babel-preset-es2015\":\"6\",\"babelrc-rollup\":\"3\",\"bootstrap\":\"4.1\",\"bootstrap-select\":\"1.13\",\"browserify\":\"14\",\"component-emitter\":\"1\",\"d3\":\"4\",\"d3-scale-chromatic\":\"1\",\"deepmerge\":\"2\",\"eclint\":\"2\",\"es6-promise\":\"4\",\"eslint\":\"4\",\"events-polyfill\":\"2\",\"express\":\"4\",\"faucet\":\"0.0\",\"font-awesome\":\"4\",\"glob\":\"7.1\",\"html-minifier\":\"3\",\"is-plain-object\":\"2\",\"jquery\":\"3\",\"json2module\":\"0.0\",\"leaflet\":\"1.3\",\"lodash\":\"4\",\"moment\":\"2\",\"morphdom\":\"2\",\"numeral\":\"2\",\"popper.js\":\"1\",\"puppeteer\":\"0.13\",\"regenerator-runtime\":\"0.11\",\"rimraf\":\"2\",\"rollup\":\"1\",\"rollup-plugin-babel\":\"3\",\"rollup-plugin-commonjs\":\"10\",\"rollup-plugin-node-resolve\":\"5\",\"rollup-plugin-uglify\":\"6\",\"rollup-pluginutils\":\"2\",\"selenium-webdriver\":\"3\",\"tap-merge\":\"0.3\",\"tape\":\"4\",\"topojson\":\"3\",\"unfetch\":\"3\"};\r\nexport var dependencies = {\"d3-array\":\"2\",\"lodash-es\":\"4\"};\r\n"],"names":["jQuery","extend","fn","translate","options","this","each","$this","$","source","attr","target","Error","node","nodes","original","q","walk","document","createTreeWalker","NodeFilter","SHOW_TEXT","nextNode","text","textContent","trimmed","trim","push","request","ajax","url","data","traditional","done","response","forEach","d","i","replace","t","trigger","type","fail","xhr","testStatus","error","console","warn"],"mappings":"qMAGqB,oBAAVA,QACTA,OAAOC,OAAOD,OAAOE,GAAI,CACvBC,UCLG,SAAmBC,GAuCxB,OAtCAA,EAAUA,GAAW,GACVC,KACNC,KAAK,WACR,IAAIC,EAAQC,EAAEH,MACVI,EAASF,EAAMG,KAAK,SAAWN,EAAQK,QAAU,GACjDE,EAASJ,EAAMG,KAAK,gBAAkBN,EAAQO,OAClD,IAAKA,EACH,MAAM,IAAIC,MAAM,6BAClB,GAAID,GAAUF,EAAd,CAIA,IAFA,IAAuCI,EAAnCC,EAAQ,GAAIC,EAAW,GAAIC,EAAI,GAC/BC,EAAOC,SAASC,iBAAiBd,KAAMe,WAAWC,UAAW,MAAM,GAChER,EAAOI,EAAKK,YAAY,CAC7B,IAAIC,EAAOV,EAAKW,YACZC,EAAUjB,EAAEkB,KAAKH,GACjBE,IACFX,EAAMa,KAAKd,GACXE,EAASY,KAAKJ,GACdP,EAAEW,KAAKF,IAGX,IAAIG,EAAU,CAAEZ,EAAGA,EAAGP,OAAQA,EAAQE,OAAQA,GAC9CH,EAAEqB,KAAK,CACLC,IAAKvB,EAAMG,KAAK,aAAeN,EAAQ0B,KAAO,YAC9CC,KAAMH,EACNI,aAAa,IACZC,KAAK,SAAUC,GAChBA,EAASC,QAAQ,SAAUC,EAAGC,GAC5BD,EAAEvB,KAAOC,EAAMuB,GACfD,EAAEvB,KAAKW,YAAcT,EAASsB,GAAGC,QAAQF,EAAEpB,EAAGoB,EAAEG,KAElDhC,EAAMiC,QAAQ,CAAEC,KAAM,YAAatC,UAAW+B,MAC7CQ,KAAK,SAAUC,EAAKC,EAAYC,GACjCtC,EAAMiC,QAAQ,CAAEC,KAAM,QAASb,QAASA,EAASe,IAAKA,IAEtDG,QAAQC,KAAK,qBAAsBF,QAGhCxC,kBCtCY"}