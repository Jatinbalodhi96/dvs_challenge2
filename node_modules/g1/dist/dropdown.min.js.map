{"version":3,"file":"dropdown.min.js","sources":["../node_modules/deepmerge/dist/es.js","../src/dropdown.js","../index-dropdown.js","../src/package.js"],"sourcesContent":["var isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tObject.keys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tObject.keys(source).forEach(function(key) {\n\t\tif (!options.isMergeableObject(source[key]) || !target[key]) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = deepmerge(target[key], source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nexport default deepmerge_1;\n","import * as default_templates from './dropdown.template.html'\nimport deepmerge from 'deepmerge'\n\nvar default_options = {\n  target: '',\n  multiple: false,\n  value_key: 'value',\n  label_key: 'label'\n}\n\nexport function dropdown(js_options) {\n  var self = $(this)\n  var options = deepmerge(default_options, js_options)\n\n  self.html(_.template(default_templates['template_dropdown'])(options))\n\n  if (options.data) {\n    render(options.data)\n    // Set the default\n    if (options.value)\n      self.find('.selectpicker').val(options.value).selectpicker('refresh')\n    // trigger 'load' event\n    self.trigger({type: 'load'})\n  }\n  else if (options.url) {\n    render(['Loading...'])\n    $.ajax(options.url)\n      .fail(function(xhr, status, message) {\n        // load error template\n        self.html(_.template(default_templates['template_error'])({message: message}))\n      })\n      .done(function(response) {\n        render(response)\n        self.find('.selectpicker').selectpicker('refresh')\n        self.trigger({type: 'load'})\n      })\n  }\n\n  function render(data) {\n    options.data = data\n    if (options.key) {\n      // urlfilter\n      self.urlfilter({\n        selector: 'select.urlfilter',\n        target: options.target,\n        event: 'change',\n        remove: true\n      })\n    }\n    // re-render dropdown template options with fetched data\n    var template = typeof data[0] == 'object' ? 'template_dropdown_object' : 'template_dropdown_options'\n    self.find('.selectpicker')\n      .html(_.template(default_templates[template])(options))\n      .selectpicker(options.options)\n  }\n\n  return this\n}\n","export { version } from './src/package.js'\nimport { dropdown } from './src/dropdown.js'\n\nif (typeof jQuery != 'undefined') {\n  jQuery.extend(jQuery.fn, {\n    dropdown: dropdown\n  })\n}\n","export var name = \"g1\";\r\nexport var version = \"0.17.3\";\r\nexport var description = \"Gramex 1.x interaction library\";\r\nexport var license = \"MIT\";\r\nexport var author = \"S Anand <s.anand@gramener.com>\";\r\nexport var module = \"modules.js\";\r\nexport var main = \"dist/g1.js\";\r\nexport var jsdelivr = \"dist/g1.min.js\";\r\nexport var unpkg = \"dist/g1.min.js\";\r\nexport var repository = {\"type\":\"git\",\"url\":\"git@code.gramener.com:s.anand/g1.git\"};\r\nexport var scripts = {\"lint\":\"eslint index*.js src && eclint check '**/*.html' '**/*.js' '**/*.css' '**/*.yaml' '**/*.md'\",\"build\":\"rimraf dist && json2module package.json > src/package.js && rollup -c\",\"dev\":\"rimraf dist && json2module package.json > src/package.js && rollup -c -w\",\"pretest\":\"npm run lint && npm run build && browserify -s tape -r tape -o test/tape.js\",\"server\":\"npm run pretest && npm run lint && node test/server.js\",\"test\":\"tape test/test-*.js | faucet && node test/server.js puppeteer | tap-merge | faucet\",\"test-chrome\":\"node test/server.js chrome | tap-merge | faucet\",\"test-edge\":\"node test/server.js MicrosoftEdge | tap-merge | faucet\",\"test-firefox\":\"node test/server.js firefox | tap-merge | faucet\",\"prepublishOnly\":\"npm test\"};\r\nexport var devDependencies = {\"babel-core\":\"6\",\"babel-plugin-external-helpers\":\"6\",\"babel-plugin-transform-runtime\":\"6\",\"babel-preset-env\":\"1\",\"babel-preset-es2015\":\"6\",\"babelrc-rollup\":\"3\",\"bootstrap\":\"4.1\",\"bootstrap-select\":\"1.13\",\"browserify\":\"14\",\"component-emitter\":\"1\",\"d3\":\"4\",\"d3-scale-chromatic\":\"1\",\"deepmerge\":\"2\",\"eclint\":\"2\",\"es6-promise\":\"4\",\"eslint\":\"4\",\"events-polyfill\":\"2\",\"express\":\"4\",\"faucet\":\"0.0\",\"font-awesome\":\"4\",\"glob\":\"7.1\",\"html-minifier\":\"3\",\"is-plain-object\":\"2\",\"jquery\":\"3\",\"json2module\":\"0.0\",\"leaflet\":\"1.3\",\"lodash\":\"4\",\"moment\":\"2\",\"morphdom\":\"2\",\"numeral\":\"2\",\"popper.js\":\"1\",\"puppeteer\":\"0.13\",\"regenerator-runtime\":\"0.11\",\"rimraf\":\"2\",\"rollup\":\"1\",\"rollup-plugin-babel\":\"3\",\"rollup-plugin-commonjs\":\"10\",\"rollup-plugin-node-resolve\":\"5\",\"rollup-plugin-uglify\":\"6\",\"rollup-pluginutils\":\"2\",\"selenium-webdriver\":\"3\",\"tap-merge\":\"0.3\",\"tape\":\"4\",\"topojson\":\"3\",\"unfetch\":\"3\"};\r\nexport var dependencies = {\"d3-array\":\"2\",\"lodash-es\":\"4\"};\r\n"],"names":["isMergeableObject","value","isNonNullObject","stringValue","Object","prototype","toString","call","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","Symbol","for","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","val","Array","isArray","emptyTarget","defaultArrayMerge","target","source","concat","map","element","arrayMerge","sourceIsArray","destination","keys","forEach","key","mergeObject","all","array","Error","reduce","prev","next","deepmerge_1","default_options","multiple","value_key","label_key","jQuery","extend","fn","dropdown","js_options","self","$","this","render","data","urlfilter","selector","event","remove","template","find","html","_","default_templates","selectpicker","default_templates['template_dropdown']","trigger","type","url","ajax","fail","xhr","status","message","default_templates['template_error']","done","response"],"mappings":"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"}