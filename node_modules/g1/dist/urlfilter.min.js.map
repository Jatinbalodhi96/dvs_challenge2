{"version":3,"file":"urlfilter.min.js","sources":["../src/url.js","../src/_util.js","../src/urlfilter.js","../index-urlfilter.js","../src/package.js"],"sourcesContent":["/*\n  url.parse() provides results consistent with window.location.\n\n  0 href                Full URL source\n  1 protocol            http, https, etc\n  2 origin              username:password@hostname:port\n  4 username            username\n  5 password            password\n  - host                NOT IMPLEMENTED\n  6 hostname            hostname\n  7 port                port\n  9 pathname            full path, excluding hash\n  12 search              search parameters\n  13 hash                url fragment\n\n  The following are not part of window.location, but provided anyway.\n\n  3 userinfo            username:password\n  8 relative:           Everything after origin\n  10 directory:          Directory part of pathname\n  11 file:               File part of pathname\n    - searchKey           search as an ordered dict of strings\n    - searchList          search as an ordered dict of arrays\n  */\n\nvar\n    _url_parse_key    = ['href','protocol','origin','userinfo','username','password','hostname','port','relative','pathname','directory','file','search','hash'],\n    _url_parse_qname  = ['searchKey', 'searchList'],\n    _url_parse_strict = /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,  // eslint-disable-line\n    _url_parse_search = /(?:^|&)([^&=]*)=?([^&]*)/g\n\nvar _decode_uri_component = function(s) { return decodeURIComponent(s.replace(/\\+/g, '%20')) },\n    _encode_uri_component = encodeURIComponent\n\nexport function parse(str) {\n  /* Based on parseUri 1.2.2: http://blog.stevenlevithan.com/archives/parseuri\n    MIT License\n  */\n  var uri = {\n        toString: unparse,\n        join: join,\n        update: update\n      },\n      m   = _url_parse_strict.exec(str || ''),\n      i   = 14\n\n  while (i--) uri[_url_parse_key[i]] = m[i] || ''\n\n  var search_key = uri[_url_parse_qname[0]] = {},\n      search_list = uri[_url_parse_qname[1]] = {}\n  uri[_url_parse_key[12]].replace(_url_parse_search, function ($0, key, val) {\n    if (key) {\n      key = _decode_uri_component(key)\n      val = _decode_uri_component(val)\n      search_key[key] = val\n      search_list[key] = search_list[key] || []\n      search_list[key].push(val)\n    }\n  })\n\n  return uri\n}\n\n\n// Converts the URL parts back into the original URL.\nexport function unparse(self) {\n  self = self || this\n  var protocol    = self[_url_parse_key[1]] || 'http',\n      username    = self[_url_parse_key[4]],\n      password    = self[_url_parse_key[5]],\n      hostname    = self[_url_parse_key[6]],\n      port        = self[_url_parse_key[7]],\n      pathname    = self[_url_parse_key[9]],\n      search      = self[_url_parse_key[12]],\n      hash        = self[_url_parse_key[13]],\n      search_key  = self[_url_parse_qname[0]],\n      search_list = self[_url_parse_qname[1]],\n      parts = hostname ? [protocol, '://'] : [],\n      qparts = [],\n      key, vals, i, l\n  if (username) {\n    parts.push(username)\n    if (password) parts.push(':', password)\n    parts.push('@')\n  }\n  parts.push(hostname)\n  if (port) parts.push(':', port)\n  parts.push(pathname || (hostname ? '/' : ''))\n  if (search) {\n    parts.push('?', search)\n  } else {\n    if (search_list) {\n      for (key in search_list) {\n        for (i=0, vals=search_list[key], l=vals.length; i<l; i++) {\n          qparts.push(_encode_uri_component(key) + '=' + _encode_uri_component(vals[i]))\n        }\n        if (!l) qparts.push(key)\n      }\n    } else if (search_key) {\n      for (key in search_key) {\n        qparts.push(_encode_uri_component(key) + '=' + _encode_uri_component(search_key[key]))\n      }\n    }\n    if (qparts.length) parts.push('?', qparts.join('&'))\n  }\n  if (hash) parts.push('#', hash)\n\n  return parts.join('')\n}\n\n\nexport function join(urlstr, options) {\n  options = options || {}\n  var self = this,\n      sources = self[_url_parse_key[9]].split('/'), // self.pathname.split\n      ptr     = sources.length - 1,                 // Points to last element\n      url     = parse(urlstr),\n      targets = url.pathname.split('/'),\n      l       = targets.length,\n      i,\n      frag\n\n  if (typeof options.query == 'undefined')\n    options.query = true\n  if (typeof options.hash == 'undefined')\n    options.hash = true\n\n  for (i=0; i<14; i++) {\n    if (i == 9) continue                      // Ignore path\n    if (i == 12 && !options.query) continue   // Ignore search parameters\n    if (i == 13 && !options.hash) continue    // Ignore url fragment\n    if (url[_url_parse_key[i]]) self[_url_parse_key[i]] = url[_url_parse_key[i]]\n  }\n  if (options.query && url[_url_parse_key[12]]) {  // Copy search parameters\n    self[_url_parse_qname[0]] = url[_url_parse_qname[0]]\n    self[_url_parse_qname[1]] = url[_url_parse_qname[1]]\n  }\n  for (i=0; i < l; i++) {\n    frag = targets[i]\n    if (frag == '.') {\n      sources[ptr] = ''\n    } else if (frag == '..') {\n      sources[--ptr] = ''\n    } else if (frag === '') {\n      // Ignore blank urlstr\n      if (l > 1) {\n        // Leading slash clears the URL\n        if (!i) {\n          sources[0] = frag\n          ptr = 1\n        }\n        // Trailing slash is appended\n        if (i == l - 1) sources[ptr] = frag\n      }\n    } else {\n      sources[ptr] = frag\n      if (i < l - 1) ptr++\n    }\n  }\n\n  // Set .pathname, .directory, .file.\n  var path = self[_url_parse_key[9]] = sources.slice(0, ptr + 1).join('/'),\n      parts = path.split(/\\//),\n      relative = [path]\n  if (self[_url_parse_key[12]]) relative.push('?', self[_url_parse_key[12]])\n  if (self[_url_parse_key[13]]) relative.push('#', self[_url_parse_key[13]])\n  self[_url_parse_key[8]] = relative.join('')   // relative\n  self[_url_parse_key[10]] = parts.slice(0, parts.length - 1).join('/') + '/'   // directory\n  self[_url_parse_key[11]] = parts[parts.length - 1]  // file\n\n  return self\n}\n\n\nexport function update(args, mode) {\n  var self = this,\n      search_key = self[_url_parse_qname[0]],\n      search_list = self[_url_parse_qname[1]],\n      qparts = [],\n      modes = {},\n      key, val, i, l, hash, search_list_key, result\n\n  if (mode) {\n    // Ensure that mode is a string\n    mode = '' + mode\n    // If the mode is like a=add&b=toggle, treat it like URL search params and\n    // convert it into a dictionary\n    if (mode.match(/[&=]/))\n      modes = parse('?' + mode).searchKey\n    // If the mode is just a string like add, del, toggle, apply it to all keys\n    else\n      for (key in args)\n        modes[key] = mode\n  }\n\n  for (key in args) {\n    val = args[key]\n    if (val === null) {\n      search_list[key] = []\n    } else {\n      if (!Array.isArray(val)) val = [val]\n      if (!modes[key])\n        search_list[key] = val\n      else {\n        // Ensure that search_list[key] exists\n        if (!(key in search_list)) search_list[key] = []\n\n        // Prepare a hash for lookup\n        for (hash={}, i=0, l=val.length; i<l; i++)\n          hash[val[i].toString()] = 1\n\n        // Ensure that mode is a string\n        mode = '' + modes[key]\n\n        if (mode.match(/add/i))\n          search_list[key] = search_list[key].concat(val)\n\n        // mode=del deletes all matching values\n        else if (mode.match(/del/i)) {\n          for (result=[], search_list_key=search_list[key], i=0, l=search_list_key.length; i<l; i++) {\n            if (!hash[search_list_key[i]])\n              result.push(search_list_key[i])\n          }\n          search_list[key] = result\n        }\n\n        // mode=toggle deletes matching values, adds the rest\n        else if (mode.match(/toggle/i)) {\n          for (result=[], search_list_key=search_list[key], i=0, l=search_list_key.length; i<l; i++) {\n            if (hash[search_list_key[i]])\n              hash[search_list_key[i]] = 2 // Mark it as present\n            else\n              result.push(search_list_key[i])\n          }\n          // Append the unmarked values\n          for (val in hash)\n            if (hash[val] == 1)\n              result.push(val)\n          search_list[key] = result\n        }\n      }\n    }\n    if (search_list[key].length === 0) {\n      delete search_key[key]\n      delete search_list[key]\n    } else {\n      search_key[key] = search_list[key][search_list[key].length - 1]\n    }\n  }\n  for (key in search_list) {\n    val = search_list[key]\n    for (i=0, l=val.length; i<l; i++) {\n      qparts.push(_encode_uri_component(key) + '=' + _encode_uri_component(val[i]))\n    }\n  }\n  self.search = qparts.join('&')\n  return self\n}\n\n\nexport function namespace(search, name) {\n  // Return an object with all keys in search that begin with `<name>:` or\n  // do not have a `:` in them.\n  // If name is false-y, return search\n  if (!name)\n    return search\n  var result = {}\n  for (var key in search) {\n    var parts = key.split(':')\n    if (parts.length == 1)\n      result[parts[0]] = search[key]\n    else if (parts[0] === name)\n      result[parts[1]] = search[key]\n  }\n  return result\n}\n","// jQuery utilities.\n// These are NOT jQuery plugins. They accept a $node directly.\n// These are NOT exposed as part of the API. Purely internal.\n\n// Return all values that match the selector\n// AMONG and UNDER the $node\nexport function findall($node, selector) {\n  return $node.filter(selector).add($node.find(selector))\n}\n\n// Return all values that DO NOT match the selector\n// AMONG and UNDER the $node. Complement of findall\nexport function notall($node, selector) {\n  return $node.not(selector).add($node.not(selector))\n}\n\n// Returns true if data attribute is present\n//    But if the value is \"false\", \"off\", \"n\" or \"no\" in any case, returns false (like YAML)\n// Returns default_value if data attribute is missing\nexport function hasdata($node, key, default_value) {\n  var val = $node.data(key)\n  if (typeof val == 'undefined' || val === false || val === null)\n    return default_value\n  if (typeof val == 'string' && val.match(/^(false|off|n|no)$/i))\n    return false\n  return true\n}\n\n// Return the {width:..., height:...} of the node\nexport function getSize($node) {\n  // Ideally, this is just one line:\n  //    return $node.getBoundingClientRect()\n\n  // But see http://stackoverflow.com/q/18153989/100904\n  // and https://bugzilla.mozilla.org/show_bug.cgi?id=530985\n  // If the contents exceed the bounds of an element,\n  // getBoundingClientRect() failes in Firefox.\n\n  // So set display:block, get $().width(), and unset display:block\n  $node = $($node)\n  var old_display = $node.css('display'),\n      result = {}\n  if (old_display != 'block')\n    $node.css('display', 'block')\n  result.width = $node.width()\n  result.height = $node.height()\n  if (old_display != 'block')\n    $node.css('display', old_display)\n  return result\n}\n","import { parse } from './url.js'\nimport { hasdata } from './_util.js'\n\nvar container_options = {\n  attr: 'href',\n  event: 'click change submit',\n  selector: '.urlfilter',\n  src: 'src'\n}\nvar event_namespace =  '.urlfilter'\n\nexport function urlfilter(options) {\n  var $self = this\n  // If there are no elements in the selection, exit silently\n  if ($self.length == 0)\n    return\n  var doc = $self[0].ownerDocument\n  var settings = $.extend({}, container_options, options || {}, this.dataset)\n  var default_remove = settings.remove || hasdata($self, 'remove')\n  var events = settings.event.split(/\\s+/).map(function (v) { return v + event_namespace }).join(' ')\n  // options.location and options.history are used purely for testing\n  var loc = settings.location || (doc.defaultView || doc.parentWindow).location\n  var hist = settings.history || (doc.defaultView || doc.parentWindow).history\n  return $self\n    .on(events, settings.selector, function (e) {\n      var $this = $(this),\n          mode = $this.data('mode') || settings.mode,\n          target = $this.data('target') || settings.target,\n          src = $this.data('src') || settings.src,\n          remove = hasdata($this, 'remove', default_remove),\n          href\n      if (e.type == 'change' || $(e.target).is(':input:not(:button)')) {\n        var key = encodeURIComponent($this.attr('id') || $this.attr('name'))\n        var val = encodeURIComponent($this.val())\n        href = '?' + key + '=' + val\n      }\n      else if (e.type == 'submit' || $(e.target).is('form')) {\n        e.preventDefault()\n        href = '?' + $this.serialize()\n      }\n      else if (e.type == 'click') {\n        if ($(e.target).is('a'))\n          e.preventDefault()\n        href = $this.attr(settings.attr)\n      } else\n        return\n\n      var url = parse(href),\n          q = url.searchList\n\n      function target_url(url) {\n        var result = parse(url)\n          .join(href, { query: false, hash: false })\n          .update(q, mode)\n        if (remove) {\n          var missing_keys = {}\n          for (var key in result.searchKey)\n            if (result.searchKey[key] === '')\n              missing_keys[key] = null\n          result.update(missing_keys)\n        }\n        return result.toString()\n      }\n\n      // If the target is...       the URL is get/set at\n      // ------------------------  ---------------------\n      // unspecified (=> window)   location.href\n      // 'pushState'               location.href\n      // '#'                       location.hash\n      // anything else             $(target).data(src)\n      if (!target)\n        loc.href = target_url(loc.href)\n      else if (target == '#')\n        loc.hash = target_url(loc.hash.replace(/^#/, ''))\n      else if (target.match(/^pushstate$/i))\n        hist.pushState({}, '', target_url(loc.href))\n      else {\n        $(target).each(function () {\n          var $target = $(this)\n          var url = target_url($target.attr(src))\n          $target.attr(src, url).load(url, function () {\n            $target.trigger({ type: 'load', url: url })\n          })\n        })\n      }\n      $this.trigger({ type: 'urlfilter', url: url })\n    })\n}\n","export { version } from './src/package.js'\nimport { parse, unparse, join, update } from './src/url.js'\n\nexport var url = {\n  parse: parse,\n  unparse: unparse,\n  join: join,\n  update: update\n}\n\nimport { urlfilter } from './src/urlfilter.js'\n\nif (typeof jQuery != 'undefined') {\n  jQuery.extend(jQuery.fn, {\n    urlfilter: urlfilter\n  })\n}\n","export var name = \"g1\";\r\nexport var version = \"0.17.3\";\r\nexport var description = \"Gramex 1.x interaction library\";\r\nexport var license = \"MIT\";\r\nexport var author = \"S Anand <s.anand@gramener.com>\";\r\nexport var module = \"modules.js\";\r\nexport var main = \"dist/g1.js\";\r\nexport var jsdelivr = \"dist/g1.min.js\";\r\nexport var unpkg = \"dist/g1.min.js\";\r\nexport var repository = {\"type\":\"git\",\"url\":\"git@code.gramener.com:s.anand/g1.git\"};\r\nexport var scripts = {\"lint\":\"eslint index*.js src && eclint check '**/*.html' '**/*.js' '**/*.css' '**/*.yaml' '**/*.md'\",\"build\":\"rimraf dist && json2module package.json > src/package.js && rollup -c\",\"dev\":\"rimraf dist && json2module package.json > src/package.js && rollup -c -w\",\"pretest\":\"npm run lint && npm run build && browserify -s tape -r tape -o test/tape.js\",\"server\":\"npm run pretest && npm run lint && node test/server.js\",\"test\":\"tape test/test-*.js | faucet && node test/server.js puppeteer | tap-merge | faucet\",\"test-chrome\":\"node test/server.js chrome | tap-merge | faucet\",\"test-edge\":\"node test/server.js MicrosoftEdge | tap-merge | faucet\",\"test-firefox\":\"node test/server.js firefox | tap-merge | faucet\",\"prepublishOnly\":\"npm test\"};\r\nexport var devDependencies = {\"babel-core\":\"6\",\"babel-plugin-external-helpers\":\"6\",\"babel-plugin-transform-runtime\":\"6\",\"babel-preset-env\":\"1\",\"babel-preset-es2015\":\"6\",\"babelrc-rollup\":\"3\",\"bootstrap\":\"4.1\",\"bootstrap-select\":\"1.13\",\"browserify\":\"14\",\"component-emitter\":\"1\",\"d3\":\"4\",\"d3-scale-chromatic\":\"1\",\"deepmerge\":\"2\",\"eclint\":\"2\",\"es6-promise\":\"4\",\"eslint\":\"4\",\"events-polyfill\":\"2\",\"express\":\"4\",\"faucet\":\"0.0\",\"font-awesome\":\"4\",\"glob\":\"7.1\",\"html-minifier\":\"3\",\"is-plain-object\":\"2\",\"jquery\":\"3\",\"json2module\":\"0.0\",\"leaflet\":\"1.3\",\"lodash\":\"4\",\"moment\":\"2\",\"morphdom\":\"2\",\"numeral\":\"2\",\"popper.js\":\"1\",\"puppeteer\":\"0.13\",\"regenerator-runtime\":\"0.11\",\"rimraf\":\"2\",\"rollup\":\"1\",\"rollup-plugin-babel\":\"3\",\"rollup-plugin-commonjs\":\"10\",\"rollup-plugin-node-resolve\":\"5\",\"rollup-plugin-uglify\":\"6\",\"rollup-pluginutils\":\"2\",\"selenium-webdriver\":\"3\",\"tap-merge\":\"0.3\",\"tape\":\"4\",\"topojson\":\"3\",\"unfetch\":\"3\"};\r\nexport var dependencies = {\"d3-array\":\"2\",\"lodash-es\":\"4\"};\r\n"],"names":["_url_parse_key","_url_parse_qname","_url_parse_strict","_url_parse_search","_decode_uri_component","s","decodeURIComponent","replace","_encode_uri_component","encodeURIComponent","parse","str","uri","toString","unparse","join","update","m","exec","i","search_key","search_list","$0","key","val","push","self","vals","l","protocol","this","username","password","hostname","port","pathname","search","hash","parts","qparts","length","urlstr","options","frag","sources","split","ptr","url","targets","query","path","slice","relative","args","mode","search_list_key","result","modes","match","searchKey","Array","isArray","concat","hasdata","$node","default_value","data","container_options","attr","event","selector","src","jQuery","extend","fn","urlfilter","doc","ownerDocument","settings","$","dataset","default_remove","remove","events","map","v","loc","location","defaultView","parentWindow","hist","history","on","e","href","$this","target","type","is","preventDefault","serialize","q","searchList","target_url","missing_keys","pushState","each","$target","load","trigger"],"mappings":"yMA0BIA,EAAoB,CAAC,OAAO,WAAW,SAAS,WAAW,WAAW,WAAW,WAAW,OAAO,WAAW,WAAW,YAAY,OAAO,SAAS,QACrJC,EAAoB,CAAC,YAAa,cAClCC,EAAoB,0IACpBC,EAAoB,4BAEpBC,EAAwB,SAASC,GAAK,OAAOC,mBAAmBD,EAAEE,QAAQ,MAAO,SACjFC,EAAwBC,mBAErB,SAASC,EAAMC,GAYpB,IARA,IAAIC,EAAM,CACJC,SAAUC,EACVC,KAAMA,EACNC,OAAQA,GAEVC,EAAMf,EAAkBgB,KAAKP,GAAO,IACpCQ,EAAM,GAEHA,KAAKP,EAAIZ,EAAemB,IAAMF,EAAEE,IAAM,GAE7C,IAAIC,EAAaR,EAAIX,EAAiB,IAAM,GACxCoB,EAAcT,EAAIX,EAAiB,IAAM,GAW7C,OAVAW,EAAIZ,EAAe,KAAKO,QAAQJ,EAAmB,SAAUmB,EAAIC,EAAKC,GAChED,IACFA,EAAMnB,EAAsBmB,GAC5BC,EAAMpB,EAAsBoB,GAC5BJ,EAAWG,GAAOC,EAClBH,EAAYE,GAAOF,EAAYE,IAAQ,GACvCF,EAAYE,GAAKE,KAAKD,MAInBZ,EAKF,SAASE,EAAQY,GAEtB,IAYIH,EAAKI,EAAMR,EAAGS,EAZdC,GADJH,EAAOA,GAAQI,MACQ9B,EAAe,KAAO,OACzC+B,EAAcL,EAAK1B,EAAe,IAClCgC,EAAcN,EAAK1B,EAAe,IAClCiC,EAAcP,EAAK1B,EAAe,IAClCkC,EAAcR,EAAK1B,EAAe,IAClCmC,EAAcT,EAAK1B,EAAe,IAClCoC,EAAcV,EAAK1B,EAAe,KAClCqC,EAAcX,EAAK1B,EAAe,KAClCoB,EAAcM,EAAKzB,EAAiB,IACpCoB,EAAcK,EAAKzB,EAAiB,IACpCqC,EAAQL,EAAW,CAACJ,EAAU,OAAS,GACvCU,EAAS,GAUb,GARIR,IACFO,EAAMb,KAAKM,GACPC,GAAUM,EAAMb,KAAK,IAAKO,GAC9BM,EAAMb,KAAK,MAEba,EAAMb,KAAKQ,GACPC,GAAMI,EAAMb,KAAK,IAAKS,GAC1BI,EAAMb,KAAKU,IAAaF,EAAW,IAAM,KACrCG,EACFE,EAAMb,KAAK,IAAKW,OACX,CACL,GAAIf,EACF,IAAKE,KAAOF,EAAa,CACvB,IAAKF,EAAE,EAA0BS,GAAvBD,EAAKN,EAAYE,IAAaiB,OAAQrB,EAAES,EAAGT,IACnDoB,EAAOd,KAAKjB,EAAsBe,GAAO,IAAMf,EAAsBmB,EAAKR,KAEvES,GAAGW,EAAOd,KAAKF,QAEjB,GAAIH,EACT,IAAKG,KAAOH,EACVmB,EAAOd,KAAKjB,EAAsBe,GAAO,IAAMf,EAAsBY,EAAWG,KAGhFgB,EAAOC,QAAQF,EAAMb,KAAK,IAAKc,EAAOxB,KAAK,MAIjD,OAFIsB,GAAMC,EAAMb,KAAK,IAAKY,GAEnBC,EAAMvB,KAAK,IAIb,SAASA,EAAK0B,EAAQC,GAC3BA,EAAUA,GAAW,GACrB,IAMIvB,EACAwB,EAPAjB,EAAOI,KACPc,EAAUlB,EAAK1B,EAAe,IAAI6C,MAAM,KACxCC,EAAUF,EAAQJ,OAAS,EAC3BO,EAAUrC,EAAM+B,GAChBO,EAAUD,EAAIZ,SAASU,MAAM,KAC7BjB,EAAUoB,EAAQR,OAStB,SAL4B,IAAjBE,EAAQO,QACjBP,EAAQO,OAAQ,QACS,IAAhBP,EAAQL,OACjBK,EAAQL,MAAO,GAEZlB,EAAE,EAAGA,EAAE,GAAIA,IACL,GAALA,IACK,IAALA,IAAYuB,EAAQO,OACf,IAAL9B,IAAYuB,EAAQL,OACpBU,EAAI/C,EAAemB,MAAKO,EAAK1B,EAAemB,IAAM4B,EAAI/C,EAAemB,MAM3E,IAJIuB,EAAQO,OAASF,EAAI/C,EAAe,OACtC0B,EAAKzB,EAAiB,IAAM8C,EAAI9C,EAAiB,IACjDyB,EAAKzB,EAAiB,IAAM8C,EAAI9C,EAAiB,KAE9CkB,EAAE,EAAGA,EAAIS,EAAGT,IAEH,MADZwB,EAAOK,EAAQ7B,IAEbyB,EAAQE,GAAO,GACE,MAARH,EACTC,IAAUE,GAAO,GACC,KAATH,EAED,EAAJf,IAEGT,IACHyB,EAAQ,GAAKD,EACbG,EAAM,GAGJ3B,GAAKS,EAAI,IAAGgB,EAAQE,GAAOH,KAGjCC,EAAQE,GAAOH,EACXxB,EAAIS,EAAI,GAAGkB,KAKnB,IAAII,EAAOxB,EAAK1B,EAAe,IAAM4C,EAAQO,MAAM,EAAGL,EAAM,GAAG/B,KAAK,KAChEuB,EAAQY,EAAKL,MAAM,MACnBO,EAAW,CAACF,GAOhB,OANIxB,EAAK1B,EAAe,MAAMoD,EAAS3B,KAAK,IAAKC,EAAK1B,EAAe,MACjE0B,EAAK1B,EAAe,MAAMoD,EAAS3B,KAAK,IAAKC,EAAK1B,EAAe,MACrE0B,EAAK1B,EAAe,IAAMoD,EAASrC,KAAK,IACxCW,EAAK1B,EAAe,KAAOsC,EAAMa,MAAM,EAAGb,EAAME,OAAS,GAAGzB,KAAK,KAAO,IACxEW,EAAK1B,EAAe,KAAOsC,EAAMA,EAAME,OAAS,GAEzCd,EAIF,SAASV,EAAOqC,EAAMC,GAC3B,IAKI/B,EAAKC,EAAKL,EAAGS,EAAGS,EAAMkB,EAAiBC,EAJvCpC,EADOU,KACW7B,EAAiB,IACnCoB,EAFOS,KAEY7B,EAAiB,IACpCsC,EAAS,GACTkB,EAAQ,GAGZ,GAAIH,EAKF,IAHAA,EAAO,GAAKA,GAGHI,MAAM,QACbD,EAAQ/C,EAAM,IAAM4C,GAAMK,eAG1B,IAAKpC,KAAO8B,EACVI,EAAMlC,GAAO+B,EAGnB,IAAK/B,KAAO8B,EAAM,CAEhB,GAAY,QADZ7B,EAAM6B,EAAK9B,IAETF,EAAYE,GAAO,QAGnB,GADKqC,MAAMC,QAAQrC,KAAMA,EAAM,CAACA,IAC3BiC,EAAMlC,GAEN,CAEGA,KAAOF,IAAcA,EAAYE,GAAO,IAG9C,IAAKc,EAAK,GAAIlB,EAAE,EAAGS,EAAEJ,EAAIgB,OAAQrB,EAAES,EAAGT,IACpCkB,EAAKb,EAAIL,GAAGN,YAAc,EAK5B,IAFAyC,EAAO,GAAKG,EAAMlC,IAETmC,MAAM,QACbrC,EAAYE,GAAOF,EAAYE,GAAKuC,OAAOtC,QAGxC,GAAI8B,EAAKI,MAAM,QAAS,CAC3B,IAAKF,EAAO,GAAsCrC,EAAE,EAAGS,GAAvC2B,EAAgBlC,EAAYE,IAA6BiB,OAAQrB,EAAES,EAAGT,IAC/EkB,EAAKkB,EAAgBpC,KACxBqC,EAAO/B,KAAK8B,EAAgBpC,IAEhCE,EAAYE,GAAOiC,OAIhB,GAAIF,EAAKI,MAAM,WAAY,CAC9B,IAAKF,EAAO,GAAsCrC,EAAE,EAAGS,GAAvC2B,EAAgBlC,EAAYE,IAA6BiB,OAAQrB,EAAES,EAAGT,IAChFkB,EAAKkB,EAAgBpC,IACvBkB,EAAKkB,EAAgBpC,IAAM,EAE3BqC,EAAO/B,KAAK8B,EAAgBpC,IAGhC,IAAKK,KAAOa,EACO,GAAbA,EAAKb,IACPgC,EAAO/B,KAAKD,GAChBH,EAAYE,GAAOiC,QApCrBnC,EAAYE,GAAOC,EAwCS,IAA5BH,EAAYE,GAAKiB,eACZpB,EAAWG,UACXF,EAAYE,IAEnBH,EAAWG,GAAOF,EAAYE,GAAKF,EAAYE,GAAKiB,OAAS,GAGjE,IAAKjB,KAAOF,EAEV,IAAKF,EAAE,EAAGS,GADVJ,EAAMH,EAAYE,IACFiB,OAAQrB,EAAES,EAAGT,IAC3BoB,EAAOd,KAAKjB,EAAsBe,GAAO,IAAMf,EAAsBgB,EAAIL,KAI7E,OAjFWW,KAgFNM,OAASG,EAAOxB,KAAK,KAhFfe,KC5JN,SAASiC,EAAQC,EAAOzC,EAAK0C,GAClC,IAAIzC,EAAMwC,EAAME,KAAK3C,GACrB,YAAkB,IAAPC,IAA8B,IAARA,GAAyB,OAARA,EACzCyC,EACS,iBAAPzC,IAAmBA,EAAIkC,MAAM,uBCpB1C,IAAIS,EAAoB,CACtBC,KAAM,OACNC,MAAO,sBACPC,SAAU,aACVC,IAAK,WCJIxB,EAAM,CACfrC,MAAOA,EACPI,QAASA,EACTC,KAAMA,EACNC,OAAQA,GAKW,oBAAVwD,QACTA,OAAOC,OAAOD,OAAOE,GAAI,CACvBC,UDHG,SAAmBjC,GAGxB,GAAoB,GAFRZ,KAEFU,OAAV,CAEA,IAAIoC,EAJQ9C,KAII,GAAG+C,cACfC,EAAWC,EAAEN,OAAO,GAAIN,EAAmBzB,GAAW,GAAIZ,KAAKkD,SAC/DC,EAAiBH,EAASI,QAAUnB,EAN5BjC,KAM2C,UACnDqD,EAASL,EAAST,MAAMxB,MAAM,OAAOuC,IAAI,SAAUC,GAAK,OAAOA,EAV9C,eAUqEtE,KAAK,KAE3FuE,EAAMR,EAASS,WAAaX,EAAIY,aAAeZ,EAAIa,cAAcF,SACjEG,EAAOZ,EAASa,UAAYf,EAAIY,aAAeZ,EAAIa,cAAcE,QACrE,OAXY7D,KAYT8D,GAAGT,EAAQL,EAASR,SAAU,SAAUuB,GACvC,IAKIC,EALAC,EAAQhB,EAAEjD,MACVwB,EAAOyC,EAAM7B,KAAK,SAAWY,EAASxB,KACtC0C,EAASD,EAAM7B,KAAK,WAAaY,EAASkB,OAC1CzB,EAAMwB,EAAM7B,KAAK,QAAUY,EAASP,IACpCW,EAASnB,EAAQgC,EAAO,SAAUd,GAEtC,GAAc,UAAVY,EAAEI,MAAoBlB,EAAEc,EAAEG,QAAQE,GAAG,uBAAwB,CAC/D,IAAI3E,EAAMd,mBAAmBsF,EAAM3B,KAAK,OAAS2B,EAAM3B,KAAK,SACxD5C,EAAMf,mBAAmBsF,EAAMvE,OACnCsE,EAAO,IAAMvE,EAAM,IAAMC,OAEtB,GAAc,UAAVqE,EAAEI,MAAoBlB,EAAEc,EAAEG,QAAQE,GAAG,QAC5CL,EAAEM,iBACFL,EAAO,IAAMC,EAAMK,gBAEhB,CAAA,GAAc,SAAVP,EAAEI,KAKT,OAJIlB,EAAEc,EAAEG,QAAQE,GAAG,MACjBL,EAAEM,iBACJL,EAAOC,EAAM3B,KAAKU,EAASV,MAI7B,IAAIrB,EAAMrC,EAAMoF,GACZO,EAAItD,EAAIuD,WAEZ,SAASC,EAAWxD,GAClB,IAAIS,EAAS9C,EAAMqC,GAChBhC,KAAK+E,EAAM,CAAE7C,OAAO,EAAOZ,MAAM,IACjCrB,OAAOqF,EAAG/C,GACb,GAAI4B,EAAQ,CACV,IAAIsB,EAAe,GACnB,IAAK,IAAIjF,KAAOiC,EAAOG,UACS,KAA1BH,EAAOG,UAAUpC,KACnBiF,EAAajF,GAAO,MACxBiC,EAAOxC,OAAOwF,GAEhB,OAAOhD,EAAO3C,WASXmF,EAEc,KAAVA,EACPV,EAAIjD,KAAOkE,EAAWjB,EAAIjD,KAAK9B,QAAQ,KAAM,KACtCyF,EAAOtC,MAAM,gBACpBgC,EAAKe,UAAU,GAAI,GAAIF,EAAWjB,EAAIQ,OAEtCf,EAAEiB,GAAQU,KAAK,WACb,IAAIC,EAAU5B,EAAEjD,MACZiB,EAAMwD,EAAWI,EAAQvC,KAAKG,IAClCoC,EAAQvC,KAAKG,EAAKxB,GAAK6D,KAAK7D,EAAK,WAC/B4D,EAAQE,QAAQ,CAAEZ,KAAM,OAAQlD,IAAKA,QAVzCuC,EAAIQ,KAAOS,EAAWjB,EAAIQ,MAc5BC,EAAMc,QAAQ,CAAEZ,KAAM,YAAalD,IAAKA,4BEpFzB"}