!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).g1=e.g1||{})}(this,function(e){"use strict";var v=["href","protocol","origin","userinfo","username","password","hostname","port","relative","pathname","directory","file","search","hash"],m=["searchKey","searchList"],s=/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,o=/(?:^|&)([^&=]*)=?([^&]*)/g,a=function(e){return decodeURIComponent(e.replace(/\+/g,"%20"))},j=encodeURIComponent;function c(e){for(var t={toString:u,join:f,update:l},n=s.exec(e||""),r=14;r--;)t[v[r]]=n[r]||"";var h=t[m[0]]={},i=t[m[1]]={};return t[v[12]].replace(o,function(e,t,n){t&&(t=a(t),n=a(n),h[t]=n,i[t]=i[t]||[],i[t].push(n))}),t}function u(e){var t,n,r,h,i=(e=e||this)[v[1]]||"http",s=e[v[4]],o=e[v[5]],a=e[v[6]],u=e[v[7]],f=e[v[9]],l=e[v[12]],p=e[v[13]],c=e[m[0]],g=e[m[1]],d=a?[i,"://"]:[],y=[];if(s&&(d.push(s),o&&d.push(":",o),d.push("@")),d.push(a),u&&d.push(":",u),d.push(f||(a?"/":"")),l)d.push("?",l);else{if(g)for(t in g){for(r=0,h=(n=g[t]).length;r<h;r++)y.push(j(t)+"="+j(n[r]));h||y.push(t)}else if(c)for(t in c)y.push(j(t)+"="+j(c[t]));y.length&&d.push("?",y.join("&"))}return p&&d.push("#",p),d.join("")}function f(e,t){t=t||{};var n,r,h=this,i=h[v[9]].split("/"),s=i.length-1,o=c(e),a=o.pathname.split("/"),u=a.length;for(void 0===t.query&&(t.query=!0),void 0===t.hash&&(t.hash=!0),n=0;n<14;n++)9!=n&&(12==n&&!t.query||13==n&&!t.hash||!o[v[n]]||(h[v[n]]=o[v[n]]));for(t.query&&o[v[12]]&&(h[m[0]]=o[m[0]],h[m[1]]=o[m[1]]),n=0;n<u;n++)"."==(r=a[n])?i[s]="":".."==r?i[--s]="":""===r?1<u&&(n||(i[0]=r,s=1),n==u-1&&(i[s]=r)):(i[s]=r,n<u-1&&s++);var f=h[v[9]]=i.slice(0,s+1).join("/"),l=f.split(/\//),p=[f];return h[v[12]]&&p.push("?",h[v[12]]),h[v[13]]&&p.push("#",h[v[13]]),h[v[8]]=p.join(""),h[v[10]]=l.slice(0,l.length-1).join("/")+"/",h[v[11]]=l[l.length-1],h}function l(e,t){var n,r,h,i,s,o,a,u=this[m[0]],f=this[m[1]],l=[],p={};if(t)if((t=""+t).match(/[&=]/))p=c("?"+t).searchKey;else for(n in e)p[n]=t;for(n in e){if(null===(r=e[n]))f[n]=[];else if(Array.isArray(r)||(r=[r]),p[n]){n in f||(f[n]=[]);for(s={},h=0,i=r.length;h<i;h++)s[r[h].toString()]=1;if((t=""+p[n]).match(/add/i))f[n]=f[n].concat(r);else if(t.match(/del/i)){for(a=[],h=0,i=(o=f[n]).length;h<i;h++)s[o[h]]||a.push(o[h]);f[n]=a}else if(t.match(/toggle/i)){for(a=[],h=0,i=(o=f[n]).length;h<i;h++)s[o[h]]?s[o[h]]=2:a.push(o[h]);for(r in s)1==s[r]&&a.push(r);f[n]=a}}else f[n]=r;0===f[n].length?(delete u[n],delete f[n]):u[n]=f[n][f[n].length-1]}for(n in f)for(h=0,i=(r=f[n]).length;h<i;h++)l.push(j(n)+"="+j(r[h]));return this.search=l.join("&"),this}function p(e,n){return e&&n&&e.length===n.length&&e.every(function(e,t){return e===n[t]})}"undefined"!=typeof jQuery&&jQuery.extend(jQuery.fn,{urlchange:function(){var s,o,a=this,u=a.get(0).location,f={};return a.on("hashchange.urlchange",function(){var e=c(u.hash.replace(/^#/,"")),t={},n=0;for(var r in $.extend({},e.searchList,f)){var h=e.searchList[r]||[];if(!p(h,f[r]||[])){var i=0<h.length?h[0]:"";a.trigger({type:"#?"+r,hash:e,vals:h,old:s},i),f[r]=t[r]=h,n+=1}}o!=e.pathname&&(a.trigger({type:"#/",hash:e,old:s},e.pathname),t["/"]=o=e.pathname),n&&a.trigger({type:"#?",hash:e,change:t,old:s},e),$.isEmptyObject(t)||a.trigger({type:"#",hash:e,change:t,old:s},e),s=e}).trigger("hashchange")}}),e.version="0.17.3",Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=urlchange.min.js.map
